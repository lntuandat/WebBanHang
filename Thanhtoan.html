<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THANH TOÁN</title>
    <style>
        /* CSS styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;

            height: 100vh;
        }

        #checkout-container {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 1200px;
            width: 100%;
            display: flex;
        }

        .customer-info {
            flex: 2.5;
            margin-right: 20px;
            padding-right: 20px;
            border-right: 1px solid #ccc;
        }

        .product-info {
            flex: 2;
        }

        h1 {
            margin-top: 0;
            font-size: 24px;
            text-align: center;
        }

        #cart-items {
            margin-bottom: 20px;
        }

        .cart-item {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 15px;
        }

        .cart-item img {
            width: 70px;
            height: auto;
            margin-right: 10px;
            border-radius: 5px;
        }

        .cart-item div {
            flex: 1;
        }

        .item-name {
            font-weight: bold;
            margin: 0;
            font-size: 14px;
        }

        .item-price,
        .item-size,
        .item-quantity {
            margin: 5px 0;
            color: #666;
            font-size: 13px;
        }

        #total-price {
            text-align: center;
            margin-bottom: 20px;
        }

        #total-amount {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        #checkout-form {
            display: flex;
            flex-direction: column;
        }

        label {
            font-weight: bold;
        }

        input[type="text"],
        input[type="tel"],
        input[type="email"] {
            margin-bottom: 10px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }


        button[type="submit"] {
            padding: 10px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button[type="submit"]:hover {
            background-color: #0056b3;
        }

        .t {
            position: relative;
            margin-bottom: 20px;
            width: 100%;
        }


        .field-input {
            width: 100%;
            padding: 10px;
            padding-top: 20px;
            box-sizing: border-box;

        }

        .field-label {
            position: absolute;
            top: 0px;
            left: 10px;
            font-size: 12px;
            transform: translateY(-50%);
            color: #018F8C;
            transition: 0.2s;
            background-color: white;
            padding: 0 5px;
            pointer-events: none;
        }

        .input-container {
            position: relative;
            margin-bottom: 20px;
        }

        .input-field {
            width: 100%;
            padding: 10px;
            padding-top: 20px;
            box-sizing: border-box;
        }

        .input-label {
            position: absolute;
            top: 50%;
            left: 10px;
            transform: translateY(-50%);
            transition: 0.2s;
            color: #141414;
            padding: 0 5px;
            pointer-events: none;
            font-size: 13px;
        }

        .input-field:focus+.input-label,
        .input-field:not(:placeholder-shown)+.input-label {
            top: -10px;
            left: 10px;
            font-size: 12px;
            color: #0c0c0c;
            transform: translateY(0);
            background-color: white;
        }

        /* CSS styles for payment method section */
        #section-payment-method {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .section-header {
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 18px;
            color: #333;
        }

        .section-content {
            display: flex;
            flex-direction: column;
        }

        .content-box {
            margin-bottom: 20px;
        }

        .radio-wrapper {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .radio-label {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .radio-input {
            margin-right: 10px;
        }

        .radio-content-input {
            display: flex;
            align-items: center;
        }

        .main-img {
            width: 50px;
            height: auto;
            margin-right: 10px;
        }

        .radio-label-primary {
            font-size: 16px;
            color: #333;
        }

        .blank-slate {
            font-size: 14px;
            color: #666;
            margin-left: 60px;
            /* Sử dụng margin-left để tạo khoảng cách cho nội dung phụ */
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body>

    <div id="checkout-container">
        <div class="customer-info">
            <form name="F1" id="checkout-form" method="post">
                <table>
                    <!-- Phần header người gửi -->
                    <tr bgcolor="#CCCCCC">
                        <td colspan="3" style="text-align: center;">
                            <h3>THÔNG TIN GIAO HÀNG</h3>
                        </td>
                    </tr>

                    <!-- Phần input người gửi -->
                    <tr>

                        <td colspan="3">
                            <div class="input-container">
                                <input class="input-field" type="text" placeholder=" " id="hoten" name="hoten" />
                                <label class="input-label" for="hoten">*Họ và tên</label>
                            </div>
                        </td>
                    </tr>

                    <!-- Phần input email -->
                    <tr>

                        <td colspan="2">
                            <div class="input-container">
                                <input class="input-field" type="email" placeholder=" " id="txt_EmailSender"
                                    name="txt_EmailSender" />
                                <label class="input-label" for="txt_EmailSender">*Nhập Email</label>
                            </div>
                        </td>
                        <td>
                            <div class="input-container">
                                <input class="input-field" type="tel" placeholder=" " id="txt_PhoneNumSender"
                                    name="txt_PhoneNumSender" />
                                <label class="input-label" for="txt_PhoneNumSender">*Nhập phone</label>
                            </div>
                        </td>
                    </tr>

                    <tr>
                        <td colspan="3">
                            <div class="input-container">
                                <input class="input-field" type="text" placeholder=" " name="diachi" id="diachi" />
                                <label class="input-label" for="diachi">*Địa chỉ</label>
                            </div>
                        </td>
                    </tr>




                    <!-- Phần select tỉnh/tp -->
                    <tr>

                        <td>
                            <div class="t">
                                <label class="field-label" for="tinh"> *Tỉnh / thành </label>
                                <select class="field-input" id="customer_shipping_province"
                                    name="customer_shipping_province">
                                    <option data-code="null" value="null" selected="">

                                        Chọn tỉnh / thành </option>



                                    <option data-code="HC" value="50">Hồ Chí Minh</option>



                                    <option data-code="HI" value="1">Hà Nội</option>



                                    <option data-code="DA" value="32">Đà Nẵng</option>



                                    <option data-code="AG" value="57">An Giang</option>



                                    <option data-code="BV" value="49">Bà Rịa - Vũng Tàu</option>



                                    <option data-code="BI" value="47">Bình Dương</option>



                                    <option data-code="BP" value="45">Bình Phước</option>



                                    <option data-code="BU" value="39">Bình Thuận</option>



                                    <option data-code="BD" value="35">Bình Định</option>



                                    <option data-code="BL" value="62">Bạc Liêu</option>



                                    <option data-code="BG" value="15">Bắc Giang</option>



                                    <option data-code="BK" value="4">Bắc Kạn</option>



                                    <option data-code="BN" value="18">Bắc Ninh</option>



                                    <option data-code="BT" value="53">Bến Tre</option>



                                    <option data-code="CB" value="3">Cao Bằng</option>



                                    <option data-code="CM" value="63">Cà Mau</option>



                                    <option data-code="CN" value="59">Cần Thơ</option>



                                    <option data-code="GL" value="41">Gia Lai</option>



                                    <option data-code="HG" value="2">Hà Giang</option>



                                    <option data-code="HM" value="23">Hà Nam</option>



                                    <option data-code="HT" value="28">Hà Tĩnh</option>



                                    <option data-code="HO" value="11">Hòa Bình</option>



                                    <option data-code="HY" value="21">Hưng Yên</option>



                                    <option data-code="HD" value="19">Hải Dương</option>



                                    <option data-code="HP" value="20">Hải Phòng</option>



                                    <option data-code="HU" value="60">Hậu Giang</option>



                                    <option data-code="KH" value="37">Khánh Hòa</option>



                                    <option data-code="KG" value="58">Kiên Giang</option>



                                    <option data-code="KT" value="40">Kon Tum</option>



                                    <option data-code="LI" value="8">Lai Châu</option>



                                    <option data-code="LA" value="51">Long An</option>



                                    <option data-code="LO" value="6">Lào Cai</option>



                                    <option data-code="LD" value="44">Lâm Đồng</option>



                                    <option data-code="LS" value="13">Lạng Sơn</option>



                                    <option data-code="ND" value="24">Nam Định</option>



                                    <option data-code="NA" value="27">Nghệ An</option>



                                    <option data-code="NB" value="25">Ninh Bình</option>



                                    <option data-code="NT" value="38">Ninh Thuận</option>



                                    <option data-code="PT" value="16">Phú Thọ</option>



                                    <option data-code="PY" value="36">Phú Yên</option>



                                    <option data-code="QB" value="29">Quảng Bình</option>



                                    <option data-code="QM" value="33">Quảng Nam</option>



                                    <option data-code="QG" value="34">Quảng Ngãi</option>



                                    <option data-code="QN" value="14">Quảng Ninh</option>



                                    <option data-code="QT" value="30">Quảng Trị</option>



                                    <option data-code="ST" value="61">Sóc Trăng</option>



                                    <option data-code="SL" value="9">Sơn La</option>



                                    <option data-code="TH" value="26">Thanh Hóa</option>



                                    <option data-code="TB" value="22">Thái Bình</option>



                                    <option data-code="TY" value="12">Thái Nguyên</option>



                                    <option data-code="TT" value="31">Thừa Thiên Huế</option>



                                    <option data-code="TG" value="52">Tiền Giang</option>



                                    <option data-code="TV" value="54">Trà Vinh</option>



                                    <option data-code="TQ" value="5">Tuyên Quang</option>



                                    <option data-code="TN" value="46">Tây Ninh</option>



                                    <option data-code="VL" value="55">Vĩnh Long</option>



                                    <option data-code="VT" value="17">Vĩnh Phúc</option>



                                    <option data-code="YB" value="10">Yên Bái</option>



                                    <option data-code="DB" value="7">Điện Biên</option>



                                    <option data-code="DC" value="42">Đắk Lắk</option>



                                    <option data-code="DO" value="43">Đắk Nông</option>



                                    <option data-code="DN" value="48">Đồng Nai</option>



                                    <option data-code="DT" value="56">Đồng Tháp</option>



                                </select>
                            </div>
                        </td>
                        <td>
                            <div class="t">
                                <label class="field-label" for="huyen">Quận / huyện</label>
                                <select class="field-input" name="DDL_District">
                                    <option value="value">Quận / huyện</option>
                                    <option value="Quận 1">Quận 1</option>
                                    <option value="Quận 2">Quận 2</option>
                                    <option value="Quận 3">Quận 3</option>
                                    <option value="Quận Tân Phú">Quận Tân Phú</option>
                                    <option value="Quận Tân Bình">Quận Tân Bình</option>
                                    <option value="Quận Thủ Đức">Quận Thủ Đức</option>
                                    <option value="Quận Thủ Đức">Quận Bình Tân</option>
                                </select>
                            </div>
                        </td>
                        <td>
                            <div class="t"> <label class="field-label" for="huyen">Phường / xã</label>
                                <select class="field-input" name="xa">
                                    <option value="value">Phường / xã</option>
                                    <option value="BT">Bình Hưng Hòa B</option>
                                    <option value="BT">Bình Hưng Hòa A</option>

                                </select>
                            </div>
                        </td>
                    </tr>

                    <!-- Phần chọn phương thức thanh toán -->
                    <tr>
                        <td colspan="3">
                            <div id="section-payment-method" class="section">
                                <div class="section-header">
                                    <h2 class="section-title">Phương thức thanh toán</h2>
                                </div>
                                <div class="section-content">
                                    <div class="content-box">
                                        <div class="radio-wrapper content-box-row">
                                            <label class="radio-label" for="payment_method_id_222367">
                                                <div class="radio-input payment-method-checkbox">
                                                    <input type="radio" id="payment_method_id_222367"
                                                        class="input-radio" name="payment_method_id"
                                                        value="Thanh toán khi nhận hàng (COD)">
                                                </div>
                                                <div class="radio-content-input">
                                                    <img class="main-img"
                                                        src="https://hstatic.net/0/0/global/design/seller/image/payment/cod.svg?v=6">
                                                    <div>
                                                        <span class="radio-label-primary">Thanh toán khi giao hàng
                                                            (COD)</span>
                                                    </div>
                                                </div>
                                            </label>
                                        </div>
                                        <div class="radio-wrapper content-box-row content-box-row-secondary hidden"
                                            for="payment_method_id_222367">
                                            <div class="blank-slate">
                                                Giao hàng và thanh toán tận nơi trên Toàn Quốc.
                                                Miễn phí ship với đơn hàng trên 500k.
                                                Thời gian giao hàng: TP.HCM trong 12h. Tỉnh thành khác từ 2-4 ngày.
                                            </div>
                                        </div>

                                        <div class="radio-wrapper content-box-row">
                                            <label class="radio-label" for="payment_method_id_222369">
                                                <div class="radio-input payment-method-checkbox">
                                                    <input type="radio" id="payment_method_id_222369"
                                                        class="input-radio" name="payment_method_id"
                                                        value="Chuyển khoản qua ngân hàng ">
                                                </div>
                                                <div class="radio-content-input">
                                                    <img class="main-img"
                                                        src="https://hstatic.net/0/0/global/design/seller/image/payment/other.svg?v=6">
                                                    <div>
                                                        <span class="radio-label-primary">Chuyển khoản qua ngân
                                                            hàng</span>
                                                    </div>
                                                </div>
                                            </label>
                                        </div>
                                        <div class="radio-wrapper content-box-row content-box-row-secondary hidden"
                                            for="payment_method_id_222369" value="Thanh toán bằng thẻ">
                                            <div class="blank-slate">
                                                Sau khi đặt hàng, bạn sẽ nhận được email hướng dẫn thanh toán.
                                                *Nếu bạn cần giao gấp trong 2h tại HCM. Hãy liên hệ ngay với Kenta nhé!
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>


                </table>

            </form>
            <div class="ttt" style="display: flex;justify-content: space-around;">
                <a href="index.html"><button style="height: 35px;border-radius:10px ;">Trang chủ</button></a>
                <button type="submit">Thanh Toán</button>

            </div>
        </div>

        <div class="product-info">
            <h2>Thông tin sản phẩm</h2>
            <div id="cart-items">
                <!-- Cart items will be dynamically loaded here -->
            </div>
            <div id="total-price">
                <p>Tổng tiền: <span id="total-amount"></span></p>
            </div>
        </div>
    </div>
</body>
<script>


    function loadCartForCheckout() {
        var cartData = JSON.parse(localStorage.getItem('cart')) || [];
        var cartItemsContainer = document.getElementById('cart-items');
        var totalAmount = 0;

        cartData.forEach(function (item) {
            var itemElement = document.createElement('div');
            itemElement.classList.add('cart-item');

            // Kiểm tra và gán kích thước mặc định nếu undefined
            var itemSize = item.size !== undefined ? item.size : 'L';

            itemElement.innerHTML = `
            <img src="${item.img}" alt="${item.name}">
            <div>
                <p class="item-name">${item.name}</p>
                <p class="item-price">Giá: ${item.price}</p>
                <p class="item-size">Kích thước: ${itemSize}</p>
                <p class="item-quantity">Số lượng: ${item.quantity}</p>
            </div>
        `;
            cartItemsContainer.appendChild(itemElement);

            var price = parseFloat(item.price.replace(/\D/g, ''));
            totalAmount += price * item.quantity;
        });

        var totalAmountElement = document.getElementById('total-amount');
        totalAmountElement.textContent = totalAmount.toLocaleString('de-DE') + "₫";
    }

</script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    loadCartForCheckout();

    var thanhToanButton = document.querySelector('button[type="submit"]');
    thanhToanButton.addEventListener('click', function (event) {
        event.preventDefault(); // Ngăn chặn hành động mặc định của form

        var hotenInput = document.getElementById('hoten');
        var emailInput = document.getElementById('txt_EmailSender');
        var phoneInput = document.getElementById('txt_PhoneNumSender');
        var diachiInput = document.getElementById('diachi');
        var provinceInput = document.getElementById('customer_shipping_province');
        var districtInput = document.querySelector('select[name="DDL_District"]');
        var wardInput = document.querySelector('select[name="xa"]');

        // Kiểm tra và xác thực thông tin
        if (!hotenInput.value.trim() || !emailInput.value.trim() || !phoneInput.value.trim() || !diachiInput.value.trim() || provinceInput.value === 'null' || districtInput.value === 'null' || wardInput.value === 'null') {
            alert('Vui lòng điền đầy đủ thông tin và chọn tỉnh/thành phố, quận/huyện, phường/xã.');
            return;
        }

        var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(emailInput.value.trim())) {
            alert('Vui lòng nhập một địa chỉ email hợp lệ.');
            return;
        }

        var phoneRegex = /^\d{10,11}$/;
        if (!phoneRegex.test(phoneInput.value.trim())) {
            alert('Vui lòng nhập một số điện thoại hợp lệ.');
            return;
        }

        var radioInputs = document.querySelectorAll('input[name="payment_method_id"]');
        var paymentMethodSelected = false;
        radioInputs.forEach(function (input) {
            if (input.checked) {
                paymentMethodSelected = true;
            }
        });

        if (!paymentMethodSelected) {
            alert('Vui lòng chọn phương thức thanh toán.');
            return;
        }

        alert('Thanh toán thành công!');

        // Lưu thông tin thanh toán
        var paymentInfo = {
            hoten: hotenInput.value,
            email: emailInput.value,
            phone: phoneInput.value,
            diachi: diachiInput.value,
            province: provinceInput.options[provinceInput.selectedIndex].text,
            district: districtInput.options[districtInput.selectedIndex].text,
            ward: wardInput.options[wardInput.selectedIndex].text,
            payment_method: document.querySelector('input[name="payment_method_id"]:checked').value
        };

        localStorage.setItem('paymentInfo', JSON.stringify(paymentInfo));

        // Lưu thông tin giỏ hàng hiện tại
        var cartData = JSON.parse(localStorage.getItem('cart')) || [];
        localStorage.setItem('cartBackup', JSON.stringify(cartData));

        // Xóa giỏ hàng
        clearCart();

        // Chuyển hướng đến trang xác nhận thanh toán với query string chứa thông tin thanh toán
        var queryString = '?';
        for (var key in paymentInfo) {
            queryString += key + '=' + encodeURIComponent(paymentInfo[key]) + '&';
        }
        queryString = queryString.slice(0, -1);
        window.location.href = 'page2.html' + queryString;
    });
});

function clearCart() {
    localStorage.removeItem('cart');
}


</script>

</html>